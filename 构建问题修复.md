# ğŸ”§ APK æ„å»ºé—®é¢˜ä¿®å¤è¯´æ˜

## ğŸš¨ é‡åˆ°çš„é—®é¢˜

```
Build APK
Process completed with exit code 1.
```

### å…·ä½“é”™è¯¯ä¿¡æ¯
```
[ERROR]: Build failed: The minimum supported NDK version is 25.
You can download it from https://developer.android.com/ndk/downloads/.
```

### æ–°çš„é”™è¯¯ä¿¡æ¯
```
configure.ac:215: error: possibly undefined macro: LT_SYS_SYMBOL_USCORE
      If this token and others are legitimate, please use m4_pattern_allow.
      See the Autoconf documentation.
autoreconf: error: /usr/bin/autoconf failed with exit status: 1
```

## ğŸ” å¯èƒ½çš„åŸå› 

1. **NDK ç‰ˆæœ¬é—®é¢˜** - ä½¿ç”¨äº†ä¸æ”¯æŒçš„ NDK ç‰ˆæœ¬
2. **autotools ç¼ºå¤±** - ç¼ºå°‘ libtoolã€automake ç­‰æ„å»ºå·¥å…·
3. **ä¾èµ–é—®é¢˜** - kivymd ç­‰éå¿…éœ€ä¾èµ–å¯èƒ½å¯¼è‡´æ„å»ºå¤±è´¥
4. **æ„å»ºè¶…æ—¶** - Android SDK ä¸‹è½½å’Œæ„å»ºæ—¶é—´è¿‡é•¿
5. **é…ç½®é”™è¯¯** - buildozer.spec é…ç½®ä¸å½“
6. **ç¯å¢ƒé—®é¢˜** - GitHub Actions ç¯å¢ƒç¼ºå°‘æŸäº›ä¾èµ–

## âœ… å·²å®æ–½çš„ä¿®å¤

### 1ï¸âƒ£ æ›´æ–° NDK ç‰ˆæœ¬ï¼ˆå…³é”®ä¿®å¤ï¼‰
```ini
# ä¿®æ”¹å‰
android.ndk = 23b

# ä¿®æ”¹å
android.ndk = 25b
```

### 2ï¸âƒ£ æ·»åŠ ç³»ç»Ÿä¾èµ–ï¼ˆè§£å†³ autotools é—®é¢˜ï¼‰
```yaml
# åœ¨ GitHub Actions ä¸­æ·»åŠ 
sudo apt-get install -y \
  libtool \
  autotools-dev \
  automake \
  pkg-config \
  libffi-dev \
  libssl-dev
```

### 3ï¸âƒ£ æ›´æ–° Android API ç‰ˆæœ¬
```ini
# ä¿®æ”¹å‰
android.api = 30
android.sdk = 30

# ä¿®æ”¹å
android.api = 31
android.sdk = 31
```

### 3ï¸âƒ£ ç®€åŒ–ä¾èµ–é…ç½®
```ini
# ä¿®æ”¹å‰
requirements = python3,kivy==2.1.0,kivymd,certifi,charset-normalizer

# ä¿®æ”¹å
requirements = python3,kivy==2.1.0
```

### 2ï¸âƒ£ å¢åŠ æ„å»ºè¶…æ—¶æ—¶é—´
```yaml
# ä¿®æ”¹å‰
timeout-minutes: 90

# ä¿®æ”¹å  
timeout-minutes: 120
```

### 3ï¸âƒ£ æ·»åŠ è¯¦ç»†è°ƒè¯•ä¿¡æ¯
```yaml
- name: ğŸ—ï¸ Build APK
  run: |
    echo "å¼€å§‹æ„å»º APK..."
    echo "å½“å‰ç›®å½•å†…å®¹ï¼š"
    ls -la
    echo "æ£€æŸ¥ buildozer.spec æ–‡ä»¶ï¼š"
    cat buildozer.spec | head -20
    echo "å¼€å§‹æ„å»º..."
    buildozer android debug --verbose
```

### 4ï¸âƒ£ æ”¹è¿›é”™è¯¯å¤„ç†
```yaml
- name: ğŸ“‹ List build output
  if: always()  # å³ä½¿æ„å»ºå¤±è´¥ä¹Ÿæ‰§è¡Œ
  run: |
    # æ£€æŸ¥æ„å»ºè¾“å‡ºå’Œæ—¥å¿—æ–‡ä»¶
    find .buildozer -name "*.log" -type f -exec tail -50 {} \;
```

### 5ï¸âƒ£ æ·»åŠ ç¯å¢ƒæ£€æŸ¥
```yaml
- name: ğŸ”§ Install Python dependencies
  run: |
    pip install -r requirements.txt
    echo "å·²å®‰è£…çš„åŒ…ï¼š"
    pip list
    echo "Buildozer ç‰ˆæœ¬ï¼š"
    buildozer version
```

## ğŸ¯ å¸¸è§æ„å»ºé—®é¢˜è§£å†³æ–¹æ¡ˆ

### é—®é¢˜1: Android SDK ä¸‹è½½å¤±è´¥
**è§£å†³æ–¹æ¡ˆ**: 
- å¢åŠ æ„å»ºè¶…æ—¶æ—¶é—´
- ä½¿ç”¨ç¼“å­˜åŠ é€Ÿä¸‹è½½

### é—®é¢˜2: ä¾èµ–å†²çª
**è§£å†³æ–¹æ¡ˆ**:
- ç§»é™¤éå¿…éœ€ä¾èµ–ï¼ˆå¦‚ kivymdï¼‰
- é”å®š Kivy ç‰ˆæœ¬ä¸ºç¨³å®šç‰ˆæœ¬

### é—®é¢˜3: å†…å­˜ä¸è¶³
**è§£å†³æ–¹æ¡ˆ**:
- ä½¿ç”¨ ubuntu-latest è¿è¡Œå™¨
- æ¸…ç†ä¸å¿…è¦çš„æ–‡ä»¶

### é—®é¢˜4: æƒé™é—®é¢˜
**è§£å†³æ–¹æ¡ˆ**:
- ç¡®ä¿ä»“åº“æ˜¯ Public
- æ£€æŸ¥ Actions æƒé™è®¾ç½®

## ğŸ” è°ƒè¯•æ­¥éª¤

### 1ï¸âƒ£ æ£€æŸ¥æ„å»ºæ—¥å¿—
1. è®¿é—® GitHub Actions é¡µé¢
2. ç‚¹å‡»å¤±è´¥çš„æ„å»º
3. æŸ¥çœ‹è¯¦ç»†æ—¥å¿—è¾“å‡º

### 2ï¸âƒ£ æŸ¥çœ‹é”™è¯¯ä¿¡æ¯
å…³æ³¨ä»¥ä¸‹å…³é”®ä¿¡æ¯ï¼š
- Python ä¾èµ–å®‰è£…æ˜¯å¦æˆåŠŸ
- Android SDK ä¸‹è½½æ˜¯å¦å®Œæˆ
- Buildozer æ„å»ºè¿‡ç¨‹ä¸­çš„é”™è¯¯

### 3ï¸âƒ£ æœ¬åœ°æµ‹è¯•
```bash
# åœ¨æœ¬åœ°æµ‹è¯•æ„å»ºé…ç½®
buildozer android debug --verbose
```

## ğŸ“‹ éªŒè¯ä¿®å¤

### âœ… æˆåŠŸæ ‡å¿—
- Actions é¡µé¢æ˜¾ç¤ºç»¿è‰²æ„å»ºçŠ¶æ€
- ç”Ÿæˆ APK æ–‡ä»¶
- å¯ä»¥ä¸‹è½½ Artifacts

### ğŸ” æ£€æŸ¥æ–¹æ³•
1. æ¨é€ä»£ç è§¦å‘æ–°çš„æ„å»º
2. æŸ¥çœ‹æ„å»ºæ—¥å¿—æ˜¯å¦æœ‰è¯¦ç»†è¾“å‡º
3. ç¡®è®¤æ„å»ºæ—¶é—´åœ¨120åˆ†é’Ÿå†…å®Œæˆ

## ğŸš€ è¿›ä¸€æ­¥ä¼˜åŒ–å»ºè®®

### 1ï¸âƒ£ ä½¿ç”¨æ„å»ºç¼“å­˜
- ç¼“å­˜ Android SDK
- ç¼“å­˜ Python ä¾èµ–
- ç¼“å­˜ Buildozer æ–‡ä»¶

### 2ï¸âƒ£ åˆ†é˜¶æ®µæ„å»º
- ç¬¬ä¸€é˜¶æ®µï¼šç¯å¢ƒå‡†å¤‡
- ç¬¬äºŒé˜¶æ®µï¼šä¾èµ–å®‰è£…  
- ç¬¬ä¸‰é˜¶æ®µï¼šAPK æ„å»º

### 3ï¸âƒ£ æ·»åŠ æµ‹è¯•æ­¥éª¤
- éªŒè¯ APK æ–‡ä»¶å®Œæ•´æ€§
- æ£€æŸ¥åº”ç”¨åŸºæœ¬åŠŸèƒ½

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼š
1. æŸ¥çœ‹å®Œæ•´çš„æ„å»ºæ—¥å¿—
2. æ£€æŸ¥ Buildozer å®˜æ–¹æ–‡æ¡£
3. åœ¨ GitHub Issues ä¸­æŠ¥å‘Šé—®é¢˜

---

**ğŸ¯ ä¿®å¤åçš„é…ç½®åº”è¯¥èƒ½è§£å†³å¤§éƒ¨åˆ†å¸¸è§çš„æ„å»ºé—®é¢˜ï¼**
